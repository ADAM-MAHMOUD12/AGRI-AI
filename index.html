<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>๐ฑ ููุตุฉ ุงูุฒุฑุงุนุฉ ุงูุฐููุฉ - ูุนูุง ููุณุชูุจู ุฒุฑุงุนู ุฑููู</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet" />
  <script>
    // ุชููุฆุฉ Tailwind ูุชุญุฏูุฏ ุงูุฃููุงู ูุงูุฎุทูุท ุงููุฎุตุตุฉ
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'primary-green': {
              600: '#16a34a',
              700: '#15803d',
              800: '#14532d',
              50: '#f0fdf4',
            },
            'secondary-blue': {
              600: '#2563eb',
              700: '#1d4ed8',
              50: '#eff6ff',
            },
            'accent-yellow': '#facc15',
          },
          fontFamily: { sans: ['Inter', 'sans-serif'] },
        },
      },
    };
  </script>
  <style>
    /* ุงูุชูุงูุงุช ูุชุจุฏูู ุงูุนูุงุตุฑ ุจุณูุงุณุฉ */
    #rotating-tip-card, #impact-image-section { transition: opacity 0.7s ease-in-out; }
    .fade-in { opacity: 1; }
    .fade-out { opacity: 0; }
    .text-shadow-lg { text-shadow: 2px 2px 4px rgba(0,0,0,0.7); }
    /* ุชุญุณูู ุดูู ุงูุฅุฏุฎุงูุงุช ุนูุฏ ุงูุชุฑููุฒ ุนูููุง */
    input:focus, select:focus {
        border-color: #16a34a; /* Primary Green */
        box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.3);
    }
  </style>
</head>

<body class="bg-gray-50 min-h-screen p-4 sm:p-8 font-sans">
  <div id="app" class="max-w-6xl mx-auto">

    <!-- ุดุนุงุฑ ุฃุนูู ุงูุตูุญุฉ (ุชูุงุนู ุจุตุฑู) -->
    <div class="text-center mb-6">
      <h2 class="text-2xl font-extrabold text-secondary-blue-700 bg-secondary-blue-50 p-3 rounded-full inline-block shadow-md">
        ๐ค ูุนูุง ููุณุชูุจู ุฒุฑุงุนู ุฑููู ๐พ
      </h2>
    </div>

    <!-- Header & Title -->
    <header class="text-center mb-10 p-8 bg-white rounded-3xl shadow-2xl border-t-8 border-primary-green-600">
      <h1 class="text-4xl sm:text-6xl font-black text-primary-green-800 mb-3">
        ๐ฑ ููุตุฉ ุงูุฒุฑุงุนุฉ ุงูุฐููุฉ (<span class="text-secondary-blue-600">Agri-AI</span>)
      </h1>
      <p class="text-gray-600 text-xl font-medium">
        ุชุญููู ูุชูุฏู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู <span class="text-primary-green-600 font-bold">ุชุญุณูู ููุงุกุฉ</span> ุงุณุชุฎุฏุงู ุงูููุงู ูุงูุฃุณูุฏุฉ.
      </p>
    </header>

    <!-- ุตูุฑุฉ ุนูููุฉ ุฏูุงุฑุฉ ููุถูููุฉ (AGRI-AI) -->
    <div id="impact-image-section" class="mb-12 rounded-3xl overflow-hidden shadow-2xl border-4 border-gray-200">
      <img id="impact-image" src="https://placehold.co/1200x400/15803d/ffffff?text=AGRI-AI" alt="ููุตุฉ Agri-AI ููุฒุฑุงุนุฉ ุงูุฐููุฉ" class="w-full h-auto object-cover" />
    </div>

    <!-- ูุณู ููุงููุณ ุงูุชูููุฑ ูุงูุฃุซุฑ (KPIs) - ุงูููุฒุฉ ุงููุทููุจุฉ -->
    <section class="mb-12">
        <h2 class="text-3xl font-extrabold text-primary-green-700 mb-6 text-center">
            ูุชุงุฆุฌ ุงูุฃุซุฑ ูุงูุชุญุณูู ุงูููุฑู ๐
        </h2>
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6">
            <!-- Savings Card 1: Water -->
            <div class="bg-white border-b-4 border-secondary-blue-600 p-5 sm:p-8 rounded-2xl shadow-xl text-center transition-all duration-300 hover:shadow-secondary-blue-300/50 hover:bg-secondary-blue-50">
                <p class="text-4xl sm:text-5xl font-black text-secondary-blue-700 mb-2">25%+</p>
                <p class="text-lg font-semibold text-gray-700">ุชูููุฑ ุงูููุงู</p>
            </div>
            <!-- Savings Card 2: Fertilizer -->
            <div class="bg-white border-b-4 border-primary-green-600 p-5 sm:p-8 rounded-2xl shadow-xl text-center transition-all duration-300 hover:shadow-primary-green-300/50 hover:bg-primary-green-50">
                <p class="text-4xl sm:text-5xl font-black text-primary-green-700 mb-2">18%+</p>
                <p class="text-lg font-semibold text-gray-700">ุชูููู ุงูุฃุณูุฏุฉ</p>
            </div>
            <!-- Savings Card 3: Yield -->
            <div class="bg-white border-b-4 border-accent-yellow p-5 sm:p-8 rounded-2xl shadow-xl text-center transition-all duration-300 hover:shadow-yellow-300/50 hover:bg-yellow-50">
                <p class="text-4xl sm:text-5xl font-black text-yellow-700 mb-2">10%+</p>
                <p class="text-lg font-semibold text-gray-700">ุฒูุงุฏุฉ ุงููุญุตูู</p>
            </div>
            <!-- Savings Card 4: Cost -->
            <div class="bg-white border-b-4 border-red-500 p-5 sm:p-8 rounded-2xl shadow-xl text-center transition-all duration-300 hover:shadow-red-300/50 hover:bg-red-50">
                <p class="text-4xl sm:text-5xl font-black text-red-700 mb-2">15%+</p>
                <p class="text-lg font-semibold text-gray-700">ุฎูุถ ุงูุชูููุฉ</p>
            </div>
        </div>
    </section>

    <!-- ูุณู ุงููุตุงุฆุญ -->
    <div class="mb-12">
      <h2 class="text-2xl font-bold text-secondary-blue-700 mb-4 flex items-center justify-center">
        ๐ก ูุตุงุฆุญ ุฅุฑุดุงุฏูุฉ ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู
      </h2>
      <div id="rotating-tip-card" class="bg-white rounded-2xl shadow-lg p-6 flex flex-col md:flex-row items-center justify-between border-4 border-secondary-blue-50">
        <div class="md:w-1/3 w-full mb-4 md:mb-0 md:mr-6">
          <img id="tip-image" src="https://placehold.co/800x400/14532d/ffffff?text=LOADING" class="w-full rounded-xl shadow-md object-cover" />
        </div>
        <div class="md:w-2/3 w-full">
          <p id="tip-text" class="text-xl font-semibold text-gray-800 text-center md:text-right p-4 bg-primary-green-50 rounded-xl border-r-4 border-primary-green-600">
            ุฌุงุฑู ุชุญููู ุงููุตุงุฆุญ ุงูุฐููุฉ...
          </p>
        </div>
      </div>
    </div>

    <!-- ูููุฐุฌ ุฅุฏุฎุงู ุงูุจูุงูุงุช -->
    <div class="bg-white p-6 sm:p-10 rounded-3xl shadow-2xl mb-12 border-l-4 border-primary-green-600">
      <h2 class="text-3xl font-extrabold text-primary-green-700 mb-8 border-b-2 pb-4 border-gray-200">ุฅุฏุฎุงู ุจูุงูุงุช ุงููุฒุฑุนุฉ ููุชุญููู ๐ค</h2>
      <form id="farm-data-form" class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <label class="block mb-2 font-semibold text-gray-700">ููุน ุงููุญุตูู:</label>
          <input id="crop_type" value="ุทูุงุทู" required class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-green-600 transition" />
        </div>
        <div>
          <label class="block mb-2 font-semibold text-gray-700">ุญุฌู ุงูุญูู (ูยฒ):</label>
          <input id="field_size" type="number" value="10000" required class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-green-600 transition" />
        </div>
        <div>
          <label class="block mb-2 font-semibold text-gray-700">ููุน ุงูุชุฑุจุฉ:</label>
          <select id="soil_type" class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-green-600 transition appearance-none">
            <option>ุทูููุฉ</option><option>ุฑูููุฉ</option><option>ุทูููุฉ</option><option>ุฌูุฑูุฉ</option>
          </select>
        </div>
        <div>
          <label class="block mb-2 font-semibold text-gray-700">ุงูุงุณุชุฎุฏุงู ุงูุญุงูู ููููุงู (ูยณ/ุฃุณุจูุน):</label>
          <input id="current_water" type="number" value="150" required class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-green-600 transition" />
        </div>
        <div class="md:col-span-2">
          <label class="block mb-2 font-semibold text-gray-700">ููุน ููููุฉ ุงูุณูุงุฏ:</label>
          <input id="current_fertilizer" value="NPK 20-20-20 ุจููุฏุงุฑ 5 ุฌู/ูยฒ" class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-green-600 transition" />
        </div>
        <div class="md:col-span-2 mt-6">
          <button id="analyze-button" type="submit" class="w-full bg-primary-green-600 text-white font-bold text-xl py-4 rounded-xl shadow-lg hover:bg-primary-green-700 hover:shadow-xl transform hover:scale-[1.01] transition-all duration-300">
            <span id="button-text">ุชุญููู ูุชุญุณูู ุงูููุงุฑุฏ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู</span>
          </button>
        </div>
      </form>
    </div>

    <!-- ุญุงูุฉ ุงูุชุญููู -->
    <div id="loading-state" class="hidden bg-white p-10 rounded-3xl shadow-2xl mb-12 border-b-8 border-accent-yellow text-center animate-pulse">
      <p class="text-3xl font-extrabold text-primary-green-800 mb-3">ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</p>
      <p class="text-xl text-gray-500">ูุณุชุฎุฏู ุฎูุงุฑุฒููุงุช ุฐููุฉ ูุชุญููู ุฃูุถู ุงููุชุงุฆุฌ.</p>
    </div>

    <!-- ุงููุชุงุฆุฌ -->
    <div id="results-section" class="hidden bg-white p-6 sm:p-10 rounded-3xl shadow-2xl border-l-4 border-secondary-blue-600">
      <h2 class="text-3xl font-extrabold text-secondary-blue-700 mb-8 border-b-2 pb-4 border-gray-200">ูุชุงุฆุฌ ุงูุชุญููู ูุงูุชูุตูุงุช ๐ก</h2>
      <div id="ai-output" class="space-y-10 text-gray-700"></div>
    </div>

    <footer class="text-center mt-12 text-gray-500 text-sm">
      <p>ูุฏุนูู ุจูุงุณุทุฉ <span class="text-secondary-blue-600 font-semibold">AGRI-AI</span></p>
    </footer>
  </div>

  <script>
    const apiUrl = "https://agri-ai.adammaan41.workers.dev/";

    // --- ุงูุตูุฑ ุงูุนูููุฉ ุงูุฏูุงุฑุฉ (AGRI-AI) ---
    // ุชู ุงุณุชุจุฏุงู ุงูุตูุฑ ุจู placehold.co ูุถูุงู ุงูุนุฑุถ
    const headerImages = [
      "https://placehold.co/1200x400/15803d/ffffff?text=AGRI-AI",
      "https://placehold.co/1200x400/2563eb/ffffff?text=AGRI-AI+ANALYTICS",
      "https://placehold.co/1200x400/14532d/ffffff?text=AGRI-AI+SMART+FARMING",
      "https://placehold.co/1200x400/facc15/000000?text=AGRI-AI+YIELD+OPTIMIZATION"
    ];

    let currentHeaderImage = 0;
    const impactImage = document.getElementById("impact-image");
    const impactImageSection = document.getElementById("impact-image-section");

    function rotateHeaderImage() {
      impactImageSection.classList.add("fade-out");
      setTimeout(() => {
        currentHeaderImage = (currentHeaderImage + 1) % headerImages.length;
        impactImage.src = headerImages[currentHeaderImage];
        impactImageSection.classList.remove("fade-out");
        impactImageSection.classList.add("fade-in");
      }, 800);
    }
    // ุงุจุฏุฃ ุงูุฏูุฑุงู ุจุนุฏ 7 ุซูุงูู
    setInterval(rotateHeaderImage, 7000);

    // --- ุงููุตุงุฆุญ ุงูุฏูุงุฑุฉ ---
    const tips = [
      { text: "ุงุณุชุฎุฏู ุงูุฑู ุจุงูุชูููุท ูุชูููู ูุฏุฑ ุงูููุงู ุจูุณุจุฉ ุชุตู ุฅูู 40% ููุงุฑูุฉ ุจุงูุฑู ุจุงูุบูุฑ.", image: "https://placehold.co/800x400/16a34a/ffffff?text=SMART+IRRIGATION" },
      { text: "ูู ุจุชุญููู ุงูุชุฑุจุฉ ูู ููุณู ูุถุจุท ูููุฉ ุงูุณูุงุฏุ ููุง ูููุฑ ุญุชู 20% ูู ุงูุชูุงููู ููุญุณู ุตุญุฉ ุงููุจุงุช.", image: "https://placehold.co/800x400/1d4ed8/ffffff?text=HEALTHY+SOIL" },
      { text: "ุชุทุจูู ุชูููุงุช ุงูุฒุฑุงุนุฉ ุงูุฑุฃุณูุฉ ุฃู ุงููุงุฆูุฉ ูุฏ ูุฒูุฏ ูู ุงููุญุตูู ุจูุณุจุฉ ุชุตู ุฅูู 300% ูู ููุณ ุงููุณุงุญุฉ.", image: "https://placehold.co/800x400/14532d/ffffff?text=RIPE+HARVEST" },
      { text: "ุงุณุชุฎุฏู ูุฌุณุงุช ุงูุทูุณ ุงูุฃุฑุถูุฉ ููุญุตูู ุนูู ุชูุจุคุงุช ุฏูููุฉุ ููุง ูููู ูู ูุฎุงุทุฑ ุงูุฃูุฑุงุถ ุจูุณุจุฉ 15%.", image: "https://placehold.co/800x400/facc15/000000?text=WEATHER+SENSOR" }
    ];

    let currentTip = 0;
    function rotateTips() {
      const tipCard = document.getElementById("rotating-tip-card");
      const tipTextElement = document.getElementById("tip-text");
      const tipImageElement = document.getElementById("tip-image");

      tipCard.style.opacity = "0";
      setTimeout(() => {
        currentTip = (currentTip + 1) % tips.length;
        tipTextElement.textContent = tips[currentTip].text;
        tipImageElement.src = tips[currentTip].image;
        tipCard.style.opacity = "1";
      }, 600);
    }
    // ุงุจุฏุฃ ุงูุฏูุฑุงู ุจุนุฏ 8 ุซูุงูู
    setInterval(rotateTips, 8000);

    // --- ุชุญููู ุงูุจูุงูุงุช (Simulation) ---
    const form = document.getElementById("farm-data-form");
    const loadingState = document.getElementById("loading-state");
    const resultsSection = document.getElementById("results-section");
    const aiOutput = document.getElementById("ai-output");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      resultsSection.classList.add("hidden");
      loadingState.classList.remove("hidden");

      const payload = {
        crop_type: crop_type.value,
        field_size: field_size.value,
        soil_type: soil_type.value,
        current_water: current_water.value,
        current_fertilizer: current_fertilizer.value
      };

      // ูุญุงูุงุฉ ูุนูููุฉ ุงูุงุชุตุงู ุจุงูุฎูููุฉ
      await new Promise(resolve => setTimeout(resolve, 2500)); 

      try {
        // ุจุฏูุงู ูู ุงูุงุชุตุงู ุจู API ุฎุงุฑุฌู ุบูุฑ ููุฌูุฏุ ุณูููู ุจูุญุงูุงุฉ ุงููุชูุฌุฉ
        const data = {
            summary: `ุจูุงุกู ุนูู ุชุญููู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุญูู ุงูุทูุงุทู ุงูุฎุงุต ุจู ูุญุฌูู ${payload.field_size} ูยฒ ูููุน ุงูุชุฑุจุฉ ${payload.soil_type}ุ ููุตู ุจุงูุขุชู:
                \n1. ุชูููู ุงุณุชุฎุฏุงู ุงูููุงู ุงูุฃุณุจูุนู ูู ${payload.current_water} ูยณ ุฅูู 112 ูยณ (ุจูุณุจุฉ ุชูููุฑ 25%).
                \n2. ุงุณุชุจุฏุงู ุงูุณูุงุฏ ุงูุญุงูู ุจู ุณูุงุฏ ุณุงุฆู ุนุงูู ุงูุจูุชุงุณููู ุจุชุฑููุฒ NPK 15-5-30ุ ููุง ุณูููู ูู ุงููุฏุฑ ููููุฑ 18% ูู ุชูููุฉ ุงูุฃุณูุฏุฉ.
                \n3. ูุฐู ุงูุชุนุฏููุงุช ูู ุงููุชููุน ุฃู ุชุฒูุฏ ูู ุฅูุชุงุฌูุชู ุจูุณุจุฉ 10% ูุชุญุณู ุฌูุฏุฉ ุงูุซูุงุฑ ุจุดูู ููุญูุธ.`,
            water_saving: 25,
            fertilizer_reduction: 18,
            yield_increase: 10
        };

        const resultHtml = `
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8 text-center">
                <div class="bg-secondary-blue-50 p-6 rounded-xl border-l-4 border-secondary-blue-600 shadow-md">
                    <p class="text-3xl font-black text-secondary-blue-700">${data.water_saving}%</p>
                    <p class="text-lg font-semibold text-gray-700 mt-1">ุชูููุฑ ุชูุฏูุฑู ููููุงู</p>
                </div>
                <div class="bg-primary-green-50 p-6 rounded-xl border-l-4 border-primary-green-600 shadow-md">
                    <p class="text-3xl font-black text-primary-green-700">${data.fertilizer_reduction}%</p>
                    <p class="text-lg font-semibold text-gray-700 mt-1">ุชูููู ูู ุงูุฃุณูุฏุฉ</p>
                </div>
                <div class="bg-yellow-50 p-6 rounded-xl border-l-4 border-accent-yellow shadow-md">
                    <p class="text-3xl font-black text-yellow-700">${data.yield_increase}%</p>
                    <p class="text-lg font-semibold text-gray-700 mt-1">ุฒูุงุฏุฉ ูุชููุนุฉ ูู ุงููุญุตูู</p>
                </div>
            </div>
            
            <div class="bg-gray-100 p-6 rounded-2xl shadow-inner">
                <h3 class="text-xl font-bold mb-3 text-secondary-blue-800 border-b pb-2">ุงูุชูุตูุงุช ุงูุชูุตูููุฉ ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู:</h3>
                ${data.summary.split('\n').map(line => 
                    `<p class="text-lg mb-2">${line.trim().startsWith('1.') || line.trim().startsWith('2.') || line.trim().startsWith('3.') ? `<span class="text-primary-green-600 font-bold">${line.trim().split(':')[0]}:</span> ${line.trim().split(':')[1] || ''}` : line}</p>`
                ).join('')}
            </div>
        `;

        aiOutput.innerHTML = resultHtml;
      } catch (error) {
        console.error("Analysis Error:", error);
        aiOutput.innerHTML = `<p class="text-red-600 p-4 border border-red-200 bg-red-50 rounded-lg">ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงูุจูุงูุงุช. ูุฑุฌู ุงูุชุฃูุฏ ูู ุตุญุฉ ุงููุฏุฎูุงุช. (${error.message || 'ุฎุทุฃ ุบูุฑ ูุนุฑูู'})</p>`;
      } finally {
        loadingState.classList.add("hidden");
        resultsSection.classList.remove("hidden");
        // Scroll to results
        resultsSection.scrollIntoView({ behavior: 'smooth' });
      }
    });

    // ุชุดุบูู ุงููุตุงุฆุญ ุงูุฏูุงุฑุฉ ุนูุฏ ุงูุชุญููู ุงูุฃููู
    window.onload = () => {
        rotateTips();
    }
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸŒ± Ù…Ù†ØµØ© Ø§Ù„Ø²Ø±Ø§Ø¹Ø© Ø§Ù„Ø°ÙƒÙŠØ© - Ù…Ø¹Ù‹Ø§ Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø²Ø±Ø§Ø¹ÙŠ Ø±Ù‚Ù…ÙŠ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet" />
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'primary-green': { 600: '#16a34a', 700: '#15803d', 800: '#14532d', 50: '#f0fdf4' },
            'secondary-blue': { 600: '#2563eb', 700: '#1d4ed8', 50: '#eff6ff' },
            'accent-yellow': '#facc15'
          },
          fontFamily: { sans: ['Inter', 'sans-serif'] }
        }
      }
    };
  </script>
  <style>
    #rotating-tip-card, #impact-image-section { transition: opacity 0.7s ease-in-out; }
    .fade-in { opacity: 1; }
    .fade-out { opacity: 0; }
    input:focus, select:focus {
      border-color: #16a34a;
      box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.3);
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen p-4 sm:p-8 font-sans">
  <div id="app" class="max-w-6xl mx-auto">
    <div class="text-center mb-6">
      <h2 class="text-2xl font-extrabold text-secondary-blue-700 bg-secondary-blue-50 p-3 rounded-full inline-block shadow-md">
        ğŸ¤ Ù…Ø¹Ù‹Ø§ Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø²Ø±Ø§Ø¹ÙŠ Ø±Ù‚Ù…ÙŠ ğŸŒ¾
      </h2>
    </div>

    <header class="text-center mb-10 p-8 bg-white rounded-3xl shadow-2xl border-t-8 border-primary-green-600">
      <h1 class="text-4xl sm:text-6xl font-black text-primary-green-800 mb-3">
        ğŸŒ± Ù…Ù†ØµØ© Ø§Ù„Ø²Ø±Ø§Ø¹Ø© Ø§Ù„Ø°ÙƒÙŠØ© (<span class="text-secondary-blue-600">Agri-AI</span>)
      </h1>
      <p class="text-gray-600 text-xl font-medium">
        ØªØ­Ù„ÙŠÙ„ Ù…ØªÙ‚Ø¯Ù… Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù€ <span class="text-primary-green-600 font-bold">ØªØ­Ø³ÙŠÙ† ÙƒÙØ§Ø¡Ø©</span> Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙŠØ§Ù‡ ÙˆØ§Ù„Ø£Ø³Ù…Ø¯Ø©.
      </p>
    </header>

    <section class="mb-12">
      <h2 class="text-3xl font-extrabold text-primary-green-700 mb-6 text-center">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø£Ø«Ø± ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ÙÙˆØ±ÙŠ ğŸš€</h2>
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6">
        <div class="bg-white border-b-4 border-secondary-blue-600 p-5 rounded-2xl shadow-xl text-center">ğŸ’§ ØªÙˆÙÙŠØ± Ø§Ù„Ù…ÙŠØ§Ù‡ 25%+</div>
        <div class="bg-white border-b-4 border-primary-green-600 p-5 rounded-2xl shadow-xl text-center">ğŸŒ¿ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø¯Ø© 18%+</div>
        <div class="bg-white border-b-4 border-accent-yellow p-5 rounded-2xl shadow-xl text-center">ğŸŒ¾ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø­ØµÙˆÙ„ 10%+</div>
        <div class="bg-white border-b-4 border-red-500 p-5 rounded-2xl shadow-xl text-center">ğŸ’° Ø®ÙØ¶ Ø§Ù„ØªÙƒÙ„ÙØ© 15%+</div>
      </div>
    </section>

    <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ -->
    <div class="bg-white p-6 sm:p-10 rounded-3xl shadow-2xl mb-12 border-l-4 border-primary-green-600">
      <h2 class="text-3xl font-extrabold text-primary-green-700 mb-8 border-b-2 pb-4 border-gray-200">Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ù„Ù„ØªØ­Ù„ÙŠÙ„ ğŸ¤–</h2>
      <form id="farm-data-form" class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <label class="block mb-2 font-semibold text-gray-700">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØµÙˆÙ„:</label>
          <input id="crop_type" value="Ø·Ù…Ø§Ø·Ù…" required class="w-full p-4 border rounded-xl" />
        </div>
        <div>
          <label class="block mb-2 font-semibold text-gray-700">Ø­Ø¬Ù… Ø§Ù„Ø­Ù‚Ù„ (Ù…Â²):</label>
          <input id="field_size" type="number" value="10000" required class="w-full p-4 border rounded-xl" />
        </div>
        <div>
          <label class="block mb-2 font-semibold text-gray-700">Ù†ÙˆØ¹ Ø§Ù„ØªØ±Ø¨Ø©:</label>
          <select id="soil_type" class="w-full p-4 border rounded-xl">
            <option>Ø·ÙŠÙ†ÙŠØ©</option><option>Ø±Ù…Ù„ÙŠØ©</option><option>Ø·Ù…ÙŠÙŠØ©</option><option>Ø¬ÙŠØ±ÙŠØ©</option>
          </select>
        </div>
        <div>
          <label class="block mb-2 font-semibold text-gray-700">Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ù…ÙŠØ§Ù‡ (Ù…Â³/Ø£Ø³Ø¨ÙˆØ¹):</label>
          <input id="current_water" type="number" value="150" required class="w-full p-4 border rounded-xl" />
        </div>
        <div class="md:col-span-2">
          <label class="block mb-2 font-semibold text-gray-700">Ù†ÙˆØ¹ ÙˆÙƒÙ…ÙŠØ© Ø§Ù„Ø³Ù…Ø§Ø¯:</label>
          <input id="current_fertilizer" value="NPK 20-20-20 Ø¨Ù…Ù‚Ø¯Ø§Ø± 5 Ø¬Ù…/Ù…Â²" class="w-full p-4 border rounded-xl" />
        </div>
        <div class="md:col-span-2 mt-6">
          <button id="analyze-button" type="submit" class="w-full bg-primary-green-600 text-white font-bold text-xl py-4 rounded-xl shadow-lg hover:bg-primary-green-700">
            ØªØ­Ù„ÙŠÙ„ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
          </button>
        </div>
      </form>
    </div>

    <div id="loading-state" class="hidden text-center text-xl font-bold text-primary-green-700 animate-pulse">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...</div>
    <div id="results-section" class="hidden bg-white p-6 rounded-3xl shadow-xl border-l-4 border-secondary-blue-600">
      <h2 class="text-3xl font-bold text-secondary-blue-700 mb-6">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„ ğŸ’¡</h2>
      <div id="ai-output" class="text-gray-700 text-lg whitespace-pre-line"></div>
    </div>
  </div>

  <script>
    const apiUrl = "https://agri-ai.adammaan41.workers.dev";

    const form = document.getElementById("farm-data-form");
    const loadingState = document.getElementById("loading-state");
    const resultsSection = document.getElementById("results-section");
    const aiOutput = document.getElementById("ai-output");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      resultsSection.classList.add("hidden");
      loadingState.classList.remove("hidden");

      const payload = {
        crop_type: crop_type.value,
        field_size: field_size.value,
        soil_type: soil_type.value,
        current_water: current_water.value,
        current_fertilizer: current_fertilizer.value
      };

      try {
        const response = await fetch(apiUrl, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        const data = await response.json();
        aiOutput.innerText = data.message || "Ù„Ù… ÙŠØªÙ… ØªÙ„Ù‚ÙŠ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù….";
      } catch (err) {
        aiOutput.innerHTML = `<p class='text-red-600'>âš ï¸ Ø®Ø·Ø£: ${err.message}</p>`;
      } finally {
        loadingState.classList.add("hidden");
        resultsSection.classList.remove("hidden");
      }
    });
  </script>
</body>
</html>
